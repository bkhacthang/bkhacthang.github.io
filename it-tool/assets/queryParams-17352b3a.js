import{j as x,ck as R,cl as d,by as k,q as _,cm as p,b4 as j,a as M}from"./index-2bcc7c92.js";const a=new WeakMap;function O(e,t,i={}){const{mode:n="replace",route:o=x(),router:s=R(),transform:l=y=>y}=i;a.has(s)||a.set(s,new Map);const c=a.get(s);let u=o.query[e];d(()=>{u=void 0});let m;const q=k((y,f)=>(m=f,{get(){return y(),l(u!==void 0?u:p(t))},set(r){u!==r&&(u=r===t||r===null?void 0:r,c.set(e,r===t||r===null?void 0:r),f(),j(()=>{if(c.size===0)return;const b=Object.fromEntries(c.entries());c.clear();const{params:g,query:h,hash:w}=o;s[p(n)]({params:g,query:{...h,...b},hash:w})}))}}));return _(()=>o.query[e],y=>{u=y,m()},{flush:"sync"}),q}const Q={number:{fromQuery:e=>Number(e),toQuery:e=>String(e)},string:{fromQuery:e=>e,toQuery:e=>e},boolean:{fromQuery:e=>e.toLowerCase()==="true",toQuery:e=>e?"true":"false"}};function z({name:e,defaultValue:t}){const n=Q[typeof t]??Q.string,o=O(e,n.toQuery(t));return M({get(){return n.fromQuery(o.value)},set(s){o.value=n.toQuery(s)}})}export{z as u};
